using Microsoft.Azure.KeyVault;
using Microsoft.Azure.Services.AppAuthentication;

public class MyController : Controller
{
    public ActionResult Index()
    {
        string keyVaultName = "YourKeyVaultName";
        string secretName = "YourSecretName";

        var azureServiceTokenProvider = new AzureServiceTokenProvider();

        var keyVaultClient = new KeyVaultClient(
            new KeyVaultClient.AuthenticationCallback(azureServiceTokenProvider.KeyVaultTokenCallback));

        var secret = keyVaultClient.GetSecretAsync($"https://{keyVaultName}.vault.azure.net/secrets/{secretName}")
                                  .GetAwaiter().GetResult();

        string connectionString = secret.Value;

        // Use connectionString to connect to your database

        return View();
    }
}
