# Define the input and output file paths
$inputCsvFile = 'input_file.csv'
$outputCsvFile = 'output_file.csv'
$specialChar = '&&?&&'

# Function to replace newline characters and write to the output file
function Convert-AndWriteCsv {
    param (
        [string]$inputFile,
        [string]$outputFile,
        [string]$specialCharacter
    )

    Get-Content $inputFile | ForEach-Object {
        # Replace newline characters with the special character using -replace
        $_ -replace '\r\n|\r|\n', $specialCharacter
    } | Set-Content $outputFile
}

# Perform the conversion three times
for ($i = 1; $i -le 3; $i++) {
    # Call the function to replace newline characters
    Convert-AndWriteCsv -inputFile $inputCsvFile -outputFile $outputCsvFile -specialCharacter $specialChar
    
    # Update input file to use the previously generated output file for the next iteration
    $inputCsvFile = $outputCsvFile
    $outputCsvFile = "output_file_$($i + 1).csv"  # Generate a new output file for the next iteration
}
